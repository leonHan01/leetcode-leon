#二分查找 
## 题目描述

- [33. 搜索旋转排序数组](https://leetcode.cn/problems/search-in-rotated-sorted-array/)
![[Pasted image 20240404205144.png]]

## 题解

![[Xnip2024-04-04_20-54-39.jpg]]
```java
class Solution {
    public int search(int[] nums, int target) {
        int n = nums.length;
        if (n == 0) {
            return -1;
        }
        if (n == 1) {
            return nums[0] == target ? 0 : -1;
        }
        int l = 0, r = n - 1;
        while (l <= r) {
            int mid = (l + r) / 2;
            if (nums[mid] == target) {
                return mid;
            }
            if (nums[0] <= nums[mid]) {
                if (nums[0] <= target && target < nums[mid]) {
                    r = mid - 1;
                } else {
                    l = mid + 1;
                }
            } else {
                if (nums[mid] < target && target <= nums[n - 1]) {
                    l = mid + 1;
                } else {
                    r = mid - 1;
                }
            }
        }
        return -1;
    }
}
```

## 我的题解

```java
class Solution {
	public int search(int[] nums, int target) {
		int n = nums.length; // ①
		if (n == 0) {
			return -1;
		}
		if (n == 1) {
			return target == nums[0] ? 0 : -1;
		}
		int l = 0, r = n -1;
		while (l <= r) { // ②
			int mid = ((r - l) >> 1 ) + l ; // ③
			if (nums[mid] == target) {
				return mid;
			}
			if (nums[0] <= nums[mid]) {
				if (nums[0] <= target && target < nums[mid]) {
					r = mid - 1;
				} else {
					l = mid + 1;
				}
			} else {
				if (nums[mid] < target && target <= nums[n - 1]) {
					l = mid + 1;
				} else {
					r = mid - 1;
				}
			}
		}
		return -1;
	}
}
```

1. 数组长度：nums.length，注意和字符串的 s.length() 还有 List 的 size() 区分开
2. 注意，二分查找，l 需要小于等于 r，等于的情况也要考虑
3. 二分查找中位数：int mid = ((R - L) >> 1 ) + L;
	*  ((R - L) >> 1 ) 需要用括号括起来，这点容易错
	* 注意是 >> 1  右移一位，代表除于二
	*  + L 不是 +L/2，这里也犯过错误